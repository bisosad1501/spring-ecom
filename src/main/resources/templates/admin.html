<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý sản phẩm</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .actions {
            display: flex;
            gap: 10px;
        }
        form {
            margin-top: 20px;
        }
    </style>
    <link rel="stylesheet" href="/css/admin.css">

</head>
<body>
<header>
    <h1>Quản lý sản phẩm</h1>
</header>

<main>
    <!-- Thanh tìm kiếm -->
    <section>
        <form method="get" action="/admin">
            <label>
                <input type="text" name="keyword" placeholder="Tìm kiếm sản phẩm..." value="">
            </label>
            <button type="submit">Tìm kiếm</button>
        </form>
    </section>

    <!-- Danh sách sản phẩm -->
    <section>
        <h2>Danh sách sản phẩm</h2>
        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>Tên sản phẩm</th>
                <th>Mô tả</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th>Ảnh</th>
                <th>Nổi bật</th>
                <th>Hành động</th>
            </tr>
            </thead>
            <tbody>
            <!-- Lặp qua danh sách sản phẩm -->
            <tr th:each="product : ${products}">
                <td th:text="${product.id}"></td>
                <td th:text="${product.name}"></td>
                <td th:text="${product.description}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.stockCount}"></td>
                <td><img th:src="${product.imageUrl}" alt="Ảnh sản phẩm" style="width: 50px; height: auto;"></td>
                <td th:text="${product.isFeatured ? 'Có' : 'Không'}"></td>
                <td class="actions">
                    <button type="button" onclick="editProduct(
                        '${product.id}', '${product.name}', '${product.description}',
                        '${product.price}', '${product.stockCount}',
                        '${product.category.id}', '${product.imageUrl}', '${product.isFeatured}'
                    )">Sửa</button>
                    <a th:href="@{/admin/products/delete/{id}(id=${product.id})}" onclick="return confirm('Bạn có chắc chắn muốn xóa sản phẩm này?');">Xóa</a>
                </td>
            </tr>
            </tbody>
        </table>
    </section>

    <!-- Form thêm/sửa sản phẩm -->
    <section>
        <h2>Thêm/Sửa sản phẩm</h2>
        <form method="post" action="/admin/products/add">
            <label for="name">Tên sản phẩm:</label>
            <input type="text" id="name" name="name" required><br>

            <label for="description">Mô tả:</label>
            <textarea id="description" name="description"></textarea><br>

            <label for="price">Giá:</label>
            <input type="number" id="price" name="price" step="0.01" required><br>

            <label for="stockCount">Số lượng:</label>
            <input type="number" id="stockCount" name="stockCount" required><br>

            <label for="imageUrl">Ảnh sản phẩm:</label>
            <input type="text" id="imageUrl" name="imageUrl"><br>

            <label for="isFeatured">Nổi bật:</label>
            <input type="checkbox" id="isFeatured" name="isFeatured"><br>

            <button type="submit">Thêm sản phẩm</button>
        </form>

    </section>
</main>

<script>
    // Hàm chỉnh sửa sản phẩm
    function editProduct(id, name, description, price, stockCount, imageUrl, isFeatured) {
        document.getElementById('productId').value = id;
        document.getElementById('name').value = name;
        document.getElementById('description').value = description;
        document.getElementById('price').value = price;
        document.getElementById('stockCount').value = stockCount;
        document.getElementById('imageUrl').value = imageUrl;
        document.getElementById('isFeatured').checked = isFeatured === 'true';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>
</body>
</html>
